```
일단 문제는 쉬웠지만 막상 구현하려니 너무 어려웠습니다.
구현에 어려움을 느껴서 인터넷 검색을 통해 다른 사람들 코드를 참고하여서 작성하였습니다..ㅠㅠ

```


```python
import sys
from collections import defaultdict

rx = [0, 0, 1, -1]
ry = [1, -1, 0, 0]
n = int(sys.stdin.readline())
seats = [[0] * n for _ in range(n)]
students = [list(map(int, sys.stdin.readline().split())) for _ in range(n ** 2)]
friends = defaultdict(set)
for student in students:
    me = student[0]
    friends[me] = set(student[1:])
    possible = []
    for x in range(n):
        for y in range(n):
            if not seats[x][y]:
                empty = 0
                friend = 0
                for _ in range(4):
                    nx = rx[_] + x
                    ny = ry[_] + y
                    if 0 <= nx < n and 0 <= ny < n:
                        if not seats[nx][ny]:
                            empty += 1
                        if seats[nx][ny] in friends[me]:
                            friend += 1
                possible.append((friend, empty, x, y))
    possible.sort(key=lambda k: (-k[0], -k[1], k[2], k[3]))
    _, _, x, y = possible[0]
    seats[x][y] = me
answer = 0
for x in range(n):
    for y in range(n):
        me = seats[x][y]
        friend = 0
        for _ in range(4):
            nx = rx[_] + x
            ny = ry[_] + y
            if 0 <= nx < n and 0 <= ny < n:
                if seats[nx][ny] in friends[me]:
                    friend += 1
        if friend:
            answer += 10 ** (friend - 1)

print(answer)
```
