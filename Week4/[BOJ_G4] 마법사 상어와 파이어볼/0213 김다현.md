```
실패: 어디서 틀린지 모르겠음 ㅠㅠ
Q. 이동한 횟수를 어디까지 세야하는지?
Q. 문제에 나와있는 대로 구현하긴 했는데 어느 로직이 틀린지 못찾았음.
```
```python
import sys
from collections import deque

input = sys.stdin.readline

n,m,k = map(int, input().split())

arr = [[0]*n for _ in range(n)]
visited = [[0]*n for _ in range(n)] # 모여있는지 확인
dir_arr = [[0]*n for _ in range(n)] # 짝수 방향만 있는지 확인
speed_arr = [[0]*n for _ in range(n)] #속도 저장
dx = [0, 1, 1, 1, 0, -1, -1, -1]
dy = [-1, -1, 0, 1, 1, 1, 0, -1]
move_q = deque()
divie_q = deque()
for _ in range(m):
    r, c, m, s, d = map(int, input().split())
    move_q.append((r-1, c-1, m,  s, d))

for _ in range(k):    
    while move_q:
        #나눠지고 난 후 다시 Step1으로
        y, x, m, s, d = move_q.popleft()

        nx = (x + dx[d] * s) % n
        ny = (y + dy[d] * s) % n
        
        arr[ny][nx] += m
        speed_arr[ny][nx] += s
        visited[ny][nx] += 1
        
        if d % 2 != 0:
            dir_arr[ny][nx] = 1 
        

        if visited[ny][nx] > 1:
            divie_q.append((ny, nx))
        
        #움직이기전 위치는 초기화
        arr[y][x] = 0
        visited[y][x] = 0
        dir_arr[y][x] = 0
        speed_arr[y][x] = 0
        

    #나누기 시작
    while divie_q:
        y, x = divie_q.popleft()    
        m = arr[y][x]
        s = speed_arr[y][x]
        c = visited[y][x]
        weight = m // 5
        #나눌 수 없음
        if weight < 1:
            arr[y][x] = 0
            continue
        
        speed = s // c

        # 나눠지는 곳은 초기화
        visited[y][x] = 0
        arr[y][x] = 0
        dir_arr[y][x] = 0
        
        # 나누기 시작
        if dir_arr[y][x] == 0:
            for i in [0, 2, 4, 6]:
                nx = (x + dx[i]) % n
                ny = (y + dy[i]) % n
                arr[ny][nx] += weight
                visited[ny][nx] += 1
                speed_arr[ny][nx] += speed
                
                move_q.append((ny, nx, arr[ny][nx], speed, i))
        else:
            for i in [1, 3, 5, 7]:
                nx = (x + dx[i]) % n
                ny = (y + dy[i]) % n
                arr[ny][nx] += weight
                dir_arr[ny][nx] = 1
                visited[ny][nx] += 1
                speed_arr[ny][nx] += speed
                
                move_q.append((ny, nx, arr[ny][nx], speed, i))        


answer = 0
for a in arr:
    answer += sum(a)
print(answer)
```