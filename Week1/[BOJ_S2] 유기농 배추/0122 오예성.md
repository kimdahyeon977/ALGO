```python
import sys
sys.setrecursionlimit(10 ** 9)

t = int(input())
for _ in range(t):
    m, n, k = map(int, sys.stdin.readline().split())


    def bfs(x, y, board, visited):
        q = []
        q.append((x, y))
        
        while q:
            x, y = q.pop()
            
            if visited[x][y]: continue
            visited[x][y] = 1
            
            # 배추면 -> 퍼져 4방향으로
            for i in range(4):
                nx = x + d[i][0]
                ny = y + d[i][1]
                if 0 <= nx < n and 0 <= ny < m:
                    if board[x][y] == 1:
                        q.append((nx, ny))
        return visited
                    
    board = [[0] * m for i in range(n)]
    visited = [[0] * m for i in range(n)]
    d = [(1, 0), (0, 1), (-1, 0), (0, -1)]
    count = 0
    for i in range(k):
        a, b = map(int, sys.stdin.readline().split())
        board[b][a] = 1


    for i in range(n):
        for j in range(m):
            # 벌레가 없는 배추일 경우
            if not visited[i][j] and board[i][j] == 1:
                count += 1
                visited = bfs(i, j, board, visited)
            else:
                visited[i][j] = 1
                
    print(count)
```